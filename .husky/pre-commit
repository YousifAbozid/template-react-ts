#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Running pre-commit hooks..."

# Run TypeScript type checking first
echo "ğŸ”„ Running TypeScript type check..."
npx tsc --noEmit || {
  echo "âŒ TypeScript check failed! Fix the type errors above before committing."
  exit 1
}

# Run ESLint with strict TypeScript checking
echo "ğŸ”„ Running ESLint type check..."
npx eslint --max-warnings=0 --ext .js,.jsx,.ts,.tsx src/ || {
  echo "âŒ ESLint check failed! Fix the issues above before committing."
  exit 1
}

# Run lint-staged with stricter settings
echo "ğŸ”„ Running lint-staged..."
npx lint-staged --verbose --no-stash || {
  echo "âŒ lint-staged failed. Please fix the issues above and try committing again."
  exit 1
}

echo "âœ… All pre-commit checks passed!"
